{"version":3,"sources":["../src/tools.js"],"names":["wrapTarget","target","c","length","replace","buildQuery","query","list","props","join","group","aggr","diff"],"mappings":";;;;;AAAA,aAASA,UAAT,CAAoBC,MAApB,EAA4B;AACxB,YAAIC,IAAID,OAAOE,MAAP,GAAgBF,OAAO,CAAP,CAAhB,GAA4B,GAApC,CADwB,CACkB;AAC1C,eAAQC,MAAM,GAAN,IAAaA,MAAM,GAAnB,IAA0BA,MAAM,GAAhC,IAAuCA,MAAM,GAA9C,GAAqDD,MAArD,SAAkEA,OAAOG,OAAP,CAAe,IAAf,EAAqB,IAArB,CAAlE,MAAP;AACH;;AAED,aAASC,UAAT,CAAoBJ,MAApB,EAA4B;AACxB,YAAIA,OAAOK,KAAP,KAAiB,MAArB,EAA6B;AACzB,6BAAeL,OAAOM,IAAtB,SAA8BN,OAAOO,KAAP,CAAaC,IAAb,CAAkB,IAAlB,CAA9B;AACH;AACD,YAAIC,QAAST,OAAOS,KAAR,GAAoBT,OAAOU,IAA3B,SAAmCV,OAAOS,KAA1C,aAAyD,EAArE;AACA,YAAIE,OAAQX,OAAOW,IAAR,wBAAqC,EAAhD;AACA,4BACFF,KADE,mCACiCT,OAAOU,IADxC,SACgDC,IADhD,gBAGFZ,WAAWC,OAAOA,MAAlB,CAHE;AAKH;;;;;kCAGGD,U;;kCACAK,U","file":"tools.js","sourcesContent":["function wrapTarget(target) {\n    let c = target.length ? target[0] : '_';  // use a fake char when target is empty\n    return (c === '\"' || c === \"'\" || c === '`' || c === '/') ? target : `\"${target.replace(/\"/g, '\"\"')}\"`;\n}\n\nfunction buildQuery(target) {\n    if (target.query === 'list') {\n        return `list ${target.list} ${target.props.join(', ')}`;\n    }\n    let group = (target.group) ? `${target.aggr}(${target.group}) => ` : '';\n    let diff = (target.diff) ? ` => difference()` : '';\n    return `select\n${group}limit(__MAX_DATA_POINTS__, ${target.aggr})${diff}\nfrom\n${wrapTarget(target.target)}\nbetween __START__ and __END__`;\n}\n\nexport {\n    wrapTarget as wrapTarget,\n    buildQuery as buildQuery\n};"]}